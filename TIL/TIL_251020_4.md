# TIL - State와 Props


Bulb 같은 자식 컴포넌트는 부모로부터 받는 props의 값이 바뀌면 리렌더링이 발생한다.
따라서 리액트 컴포넌트는 자신이 갖고 있는 스테이트가 변경되지 않더라도 부모로부터 받는 props의 값이 변경되면 리렌더링 된다. 
```jsx

import './App.css'
import { useState } from 'react'

const Bulb = ({ light }) => {
  return (
    <div sytyle={{ width: "min-content" }}>
      {light === "ON" ?
        (<h1 style={{ backgroundColor: "orange", width: "min-content" }}>ON</h1>)
        : (<h1 style={{ backgroundColor: "gray", width: "min-content" }}>OFF</h1>)
      }
    </div>
  )
}

function App() {
  const [count, setCount] = useState(0);
  const [light, setLight] = useState("OFF");

  const addCount = () => {
    setCount(count + 1);
  }
  return (
    <>
      <div>
        <Bulb light={light} />
        <button onClick={() =>
          setLight(light === "ON" ? "OFF" : "ON")}>
          전구 {light === "ON" ? "끄기" : "켜기"}
        </button>
      </div>
      <div>
        <h1>{count}</h1>
        <button onClick={addCount}>+</button>
      </div>
    </>
  )
}

export default App

```

여기서 onClick 을 누르면 console.log에 계속 Bulb 컴포넌트가 리렌더링 되면서 "ON"이 계속 출력된다.

왜그럴까?

## 리액트 컴포넌트가 리렌더링이 발생하는 세 가지 상황
1. 자신이 관리하는 state 값이 변경될 때
2. 제공받는 props의 값이 변경될 때
3. 부모 컴포넌트가 리렌더링될 때 같이 리렌더링 됨

여기서 3번째 상황때문에 계속 리렌더링 되는 상황임. 


따라서 부모 컴포넌트 때문에 의미없이 리렌더링 되는 상황을 방지하기 위해선, state가 관련이 없다면 다른 컴포넌트로 분리하는 것이 좋다. 


```jsx

import './App.css'
import { useState } from 'react'

// Bulb 컴포넌트는 부모로부터 받는 props의 값이 바뀌면 리렌더링이 발생한다.
const Bulb = ({ light }) => {
  console.log(light);
  return (
    <>
      {light === "ON" ?
        (<h1 style={{ backgroundColor: "orange", width: "min-content" }}>ON</h1>)
        : (<h1 style={{ backgroundColor: "gray", width: "min-content" }}>OFF</h1>)
      }
    </>
  )
}

const Counter = () => {
  const [count, setCount] = useState(0);
  const addCount = () => {
    setCount(count + 1);
  }
  return (
    <>
      <h1>{count}</h1>
      <button onClick={addCount}>+</button>
    </>
  )
}

function App() {
  const [light, setLight] = useState("OFF");

  return (
    <>
      <div>
        <Bulb light={light} />
        <button onClick={() =>
          setLight(light === "ON" ? "OFF" : "ON")}>
          전구 {light === "ON" ? "끄기" : "켜기"}
        </button>
      </div>
      <div>
        <Counter />
      </div>
    </>
  )
}

export default App


```

위와 같이 Counter 컴포넌트를 분리한다. 


```jsx

import './App.css'
import { Bulb } from './components/Bulb';
import { Counter } from './components/Counter';

function App() {
  return (
    <>
      <Bulb />
      <Counter />
    </>
  )
}
export default App
```

위와같이 다 따로 분리해서 호출하여 불필요한 리렌더를 막는다. 


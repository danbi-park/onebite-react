# TIL - React Hooks, Custom Hook 만들기

# React Hooks이란?
클래스 컴포넌트의 기능을 함수 컴포넌트에서도 이용할 수 있도록 도와주는 메서드들


옛날의 리액트는,,,
Class 컴포넌트 - 모든 기능을 이용할 수 있음, 하지만 코드가 복쟙  
Function 컴포넌트 - UI만 렌더링 할 수 있음, state, ref, etc.. 등을 못씀  


Function 컴포넌트에서도 쓸 수 있도록 컨트리뷰터들이 발전시킴! useState, useRef .. 등


use 라는 접두사를 쓴다.



useState, useRef, useEffect 등 여러가지 있음

참고로 
- 함수 컴포넌트, 커스텀 훅 내부에서만 호출할 수 있고
- 조건문이나 반복문에서는 호출이 불가능하다 -> 서로다른 hook 들의 호출 순서가 엉망이 된당.
- use 접두사를 이용해 나만의 훅인 커스텀 훅을 만들 수 있다. 😳


# Custom Hook 만들기

## 1. 문제 상황: 반복되는 코드
```jsx
import { useState } from "react";

const HookExam = () => {
    // 이 부분이 여러 컴포넌트에서 반복됨
    const [input, setInput] = useState("");
    const onChange = (e) => {
        setInput(e.target.value);
    }
    
    return (
        <div>
            <input type="text" value={input} onChange={onChange} />
        </div>
    );
}

export default HookExam;
```

**문제점**: input 상태 관리 로직이 여러 컴포넌트에서 중복됩니다.

## 2. 잘못된 시도: 일반 함수로 분리
```jsx
function getInput() {
    const [input, setInput] = useState(""); // ❌ 에러 발생!
    const onChange = (e) => {
        setInput(e.target.value);
    }
    return [input, onChange];
}

const HookExam = () => {
    const [input, onChange] = getInput(); // ❌ React Hook 규칙 위반
}
```

**문제점**: 
- React Hook은 컴포넌트나 다른 Hook 내부에서만 호출 가능
- 일반 함수에서는 Hook을 사용할 수 없음

## 3. 올바른 해결책: Custom Hook 만들기
```jsx
import { useState } from "react";

// Custom Hook: use 접두사 필수!
function useInput() {
    const [input, setInput] = useState("");
    const onChange = (e) => {
        setInput(e.target.value);
    }
    return [input, onChange]; // 배열로 반환 (useState 패턴과 동일)
}

const HookExam = () => {
    const [input, onChange] = useInput(); // Custom Hook 사용
    
    return (
        <div>
            <input type="text" value={input} onChange={onChange} />
        </div>
    );
}

export default HookExam;
```

## 4. Custom Hook의 장점
- **재사용성**: 여러 컴포넌트에서 동일한 로직 사용 가능
- **관심사 분리**: 비즈니스 로직과 UI 로직 분리
- **테스트 용이성**: Hook을 독립적으로 테스트 가능
- **코드 중복 제거**: DRY 원칙 준수

## 5. Custom Hook 규칙
1. **use 접두사 필수**: `useInput`, `useCounter` 등
2. **Hook 내부에서만 Hook 사용**: useState, useEffect 등
3. **컴포넌트나 다른 Hook에서만 호출**
4. **조건부 호출 금지**: if문, 반복문 내부에서 호출하면 안됨



# 또한 보통 커스텀 훅들은 src/hooks 폴더 하위에 이름으로 저장된다. 


```Jsx
import { useState } from "react";

export function useInput() {
    const [input, setInput] = useState("");
    const onChange = (e) => {
        setInput(e.target.value);
    }
    return [input, onChange];
}
```


```Jsx
import { useInput } from "../hooks/useInput";

const HookExam = () => {
    const [input, onChange] = useInput();
    return (
        <div>
            <input type="text" value={input} onChange={onChange} />
        </div>
    );
}

export default HookExam;
```


